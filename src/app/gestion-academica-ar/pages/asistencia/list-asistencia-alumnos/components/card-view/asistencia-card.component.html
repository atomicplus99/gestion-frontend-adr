<div class="card-view">
  <div class="cards-container">
    <div class="student-card" *ngFor="let a of dataSource" 
         [ngClass]="{
           'card-puntual': a.estado === 'PUNTUAL',
           'card-tardanza': a.estado === 'TARDANZA',
           'card-ausente': a.estado === 'AUSENTE'
         }">
      <div class="card-header">
        <app-estado-badge [estado]="a.estado" size="small"></app-estado-badge>
        <div class="card-actions">
          <button class="btn btn-sm btn-icon dropdown-toggle" title="Acciones">
            <i class="fas fa-ellipsis-v"></i>
          </button>
          <div class="dropdown-menu dropdown-menu-right">
            <a class="dropdown-item" (click)="onMarkAttendance(a, 'PUNTUAL')">
              <i class="fas fa-check-circle text-success"></i>
              <span>Marcar Puntual</span>
            </a>
            <a class="dropdown-item" (click)="onMarkAttendance(a, 'TARDANZA')">
              <i class="fas fa-clock text-warning"></i>
              <span>Marcar Tardanza</span>
            </a>
            <a class="dropdown-item" (click)="onMarkAttendance(a, 'AUSENTE')">
              <i class="fas fa-times-circle text-danger"></i>
              <span>Marcar Ausente</span>
            </a>
            <a class="dropdown-item" (click)="onMarkExit(a)" *ngIf="!a.horaSalida">
              <i class="fas fa-sign-out-alt text-primary"></i>
              <span>Registrar Salida</span>
            </a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" (click)="onAddObservation(a)">
              <i class="fas fa-sticky-note"></i>
              <span>Agregar observación</span>
            </a>
          </div>
        </div>
      </div>
      <div class="card-body">
        <div class="student-info">
          <div class="student-name">{{ a.nombre }} {{ a.apellido }}</div>
          <div class="student-code">
            <span class="code-item"><i class="fas fa-id-card"></i> {{ a.codigo }}</span>
            <span class="code-item"><i class="fas fa-id-badge"></i> {{ a.dni }}</span>
          </div>
          <div class="student-details">
            <span class="detail-item">
              <i class="fas fa-school"></i> {{ a.nivel }}
            </span>
            <span class="detail-item">
              <i class="fas fa-graduation-cap"></i> {{ a.grado }} - {{ a.seccion }}
            </span>
            <span class="detail-item">
              <i class="fas fa-clock"></i> {{ a.turno }}
            </span>
          </div>
        </div>
        <div class="attendance-info">
          <div class="time-info">
            <div class="time-item">
              <i class="fas fa-sign-in-alt"></i>
              <span>Llegada: {{ a.horaLlegada }}</span>
            </div>
            <div class="time-item">
              <i class="fas fa-sign-out-alt"></i>
              <span *ngIf="a.horaSalida">Salida: {{ a.horaSalida }}</span>
              <button *ngIf="!a.horaSalida" class="btn btn-sm btn-outline-primary" (click)="onMarkExit(a)">
                <i class="fas fa-sign-out-alt"></i> Registrar Salida
              </button>
            </div>
          </div>
          <div class="date-info">
            <i class="fas fa-calendar"></i> {{ formatDate(a.fecha) }}
          </div>
          <div class="observation-info" *ngIf="a.observaciones">
            <i class="fas fa-sticky-note"></i> {{ a.observaciones }}
          </div>
        </div>
      </div>
    </div>
    
    <!-- Empty state for cards -->
    <div class="empty-cards" *ngIf="dataSource.length === 0">
      <div class="empty-state-content">
        <i class="fas fa-search-minus empty-icon"></i>
        <p class="empty-title">No se encontraron resultados</p>
        <p class="empty-subtitle">
          Intente con otros criterios de búsqueda o modifique los filtros
        </p>
      </div>
    </div>
  </div>
</div>