<!-- src/app/gestion-academica-ar/pages/asistencias/list-asistencia-alumnos.component.html -->

<div class="p-6 space-y-6">
  <h2 class="text-2xl font-semibold">Listado de Asistencias</h2>

  <!-- ---------------------- Buscador ---------------------- -->
  <div class="flex items-center gap-0.5 mb-4 max-w-md">
    <input
      class="flex-grow px-3 py-2 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
      placeholder="Buscar..."
      [(ngModel)]="filterValue"
      (ngModelChange)="applyFilter()"
    />
    <button
      class="px-4 bg-blue-600 text-white rounded-r-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500"
      (click)="applyFilter()"
      aria-label="Filtrar"
    >
      üîç
    </button>
  </div>

  <!-- ---------------------- Tabla ---------------------- -->
  <div class="overflow-auto bg-white rounded shadow-lg">
    <table
      mat-table
      [dataSource]="dataSource"
      matSort
      class="min-w-full divide-y divide-gray-200"
    >

      <!-- C√≥digo -->
      <ng-container matColumnDef="codigo">
        <th mat-header-cell *matHeaderCellDef mat-sort-header class="px-4 py-2">C√≥digo</th>
        <td mat-cell *matCellDef="let a" class="px-4 py-2">{{ a.codigo }}</td>
      </ng-container>

      <!-- Nombre -->
      <ng-container matColumnDef="nombre">
        <th mat-header-cell *matHeaderCellDef mat-sort-header class="px-4 py-2">Nombre</th>
        <td mat-cell *matCellDef="let a" class="px-4 py-2">{{ a.nombre }}</td>
      </ng-container>

      <!-- Apellido -->
      <ng-container matColumnDef="apellido">
        <th mat-header-cell *matHeaderCellDef mat-sort-header class="px-4 py-2">Apellido</th>
        <td mat-cell *matCellDef="let a" class="px-4 py-2">{{ a.apellido }}</td>
      </ng-container>

      <!-- Turno -->
      <ng-container matColumnDef="turno">
        <th mat-header-cell *matHeaderCellDef mat-sort-header class="px-4 py-2">Turno</th>
        <td mat-cell *matCellDef="let a" class="px-4 py-2">{{ a.turno }}</td>
      </ng-container>

      <!-- Hora de llegada -->
      <ng-container matColumnDef="horaLlegada">
        <th mat-header-cell *matHeaderCellDef mat-sort-header class="px-4 py-2">Llegada</th>
        <td mat-cell *matCellDef="let a" class="px-4 py-2">{{ a.horaLlegada }}</td>
      </ng-container>

      <!-- Estado -->
      <ng-container matColumnDef="estado">
        <th mat-header-cell *matHeaderCellDef mat-sort-header class="px-4 py-2">Estado</th>
        <td mat-cell *matCellDef="let a" class="px-4 py-2">
          <span
            class="px-2 py-0.5 rounded-full text-xs font-medium"
            [ngClass]="
              a.estado === 'PUNTUAL'
                ? 'bg-green-100 text-green-800'
                : 'bg-red-100 text-red-800'
            "
          >
            {{ a.estado }}
          </span>
        </td>
      </ng-container>

      <!-- Fecha -->
      <ng-container matColumnDef="fecha">
        <th mat-header-cell *matHeaderCellDef mat-sort-header class="px-4 py-2">Fecha</th>
        <td mat-cell *matCellDef="let a" class="px-4 py-2">
          {{ a.fecha | date : 'medium' }}
        </td>
      </ng-container>

      <!-- Cabecera y filas -->
      <tr
        mat-header-row
        *matHeaderRowDef="displayedColumns"
        class="bg-gray-100 text-gray-700 sticky"
      ></tr>
      <tr
        mat-row
        *matRowDef="let row; columns: displayedColumns"
        class="hover:bg-gray-50"
      ></tr>
    </table>

    <mat-paginator
      [pageSizeOptions]="[5, 10, 20]"
      showFirstLastButtons
      class="mt-4"
    ></mat-paginator>
  </div>
</div>
